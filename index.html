<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>L√¨ x√¨ nƒÉm m·ªõi üßß</title>
  <style>
    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      background: radial-gradient(circle at top, #7a0019, #2b0009 60%);
      font-family: system-ui, Arial;
      overflow: hidden;
      color: #7a0019;
    }
    .card {
      background: #fff7e6;
      padding: 22px 18px 26px;
      border-radius: 18px;
      text-align: center;
      box-shadow: 0 20px 50px rgba(0,0,0,.35);
      max-width: 360px;
      width: 92%;
      position: relative;
      z-index: 2;
    }
    h1 { margin: 6px 0 10px; }
    .from { font-weight: 700; color: #b3001b; margin-bottom: 12px; }

    .envelope {
      width: 180px; height: 120px; margin: 18px auto;
      position: relative; cursor: pointer; perspective: 800px;
    }
    .env-body {
      position: absolute; inset: 0;
      background: linear-gradient(135deg,#c6001a,#ff3b3b);
      border-radius: 10px;
      box-shadow: inset 0 0 0 2px rgba(255,255,255,.2);
    }
    .env-flap {
      position: absolute; left: 0; right: 0; top: 0; height: 60px;
      background: linear-gradient(135deg,#ff6b6b,#c6001a);
      transform-origin: top; border-radius: 10px 10px 0 0;
      transition: transform .7s ease;
    }
    .envelope.open .env-flap { transform: rotateX(-160deg); }

    .btn {
      background: #c6001a; color: #fff; border: none;
      padding: 12px 16px; border-radius: 10px; font-size: 16px;
      cursor: pointer; box-shadow: 0 8px 20px rgba(198,0,26,.4);
    }
    .btn:disabled { opacity: .6; cursor: not-allowed; }

    .result { margin-top: 10px; font-size: 18px; font-weight: 700; color: #b3001b; min-height: 24px; }

    .horse {
      position: fixed; bottom: 0; left: -120px; font-size: 64px;
      animation: run 10s linear infinite; z-index: 1;
      filter: drop-shadow(0 8px 10px rgba(0,0,0,.4));
    }
    @keyframes run { 0%{left:-120px} 100%{left:110%} }

    canvas { position: fixed; inset: 0; pointer-events: none; z-index: 0; }
  </style>
</head>
<body>
  <canvas id="fw"></canvas>
  <div class="horse">üêé</div>

  <div class="card">
    <h1>üßß L√¨ x√¨ nƒÉm m·ªõi</h1>
    <div class="from">Ng∆∞·ªùi l√¨ x√¨: Linh xinh g√°i üòé</div>

    <div id="env" class="envelope">
      <div class="env-flap"></div>
      <div class="env-body"></div>
    </div>

    <button id="btn" class="btn">M·ªü phong bao</button>
    <div id="result" class="result"></div>
  </div>

  <script>
    // ===== FIREWORKS =====
    const canvas = document.getElementById('fw');
    const ctx = canvas.getContext('2d');
    function resize(){ canvas.width = innerWidth; canvas.height = innerHeight; }
    addEventListener('resize', resize); resize();

    const fireworks = [];
    function launch() {
      const x = Math.random()*canvas.width;
      const y = Math.random()*canvas.height*0.5;
      for (let i=0;i<30;i++){
        fireworks.push({ x, y, vx:(Math.random()-0.5)*6, vy:(Math.random()-0.5)*6, life:60 });
      }
    }
    setInterval(launch, 1200);

    function tick(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      for (let i=fireworks.length-1;i>=0;i--){
        const p = fireworks[i];
        p.x += p.vx; p.y += p.vy; p.vy += 0.05; p.life--;
        ctx.fillStyle = `hsla(${Math.random()*360},100%,60%,.9)`;
        ctx.beginPath(); ctx.arc(p.x,p.y,2,0,Math.PI*2); ctx.fill();
        if (p.life<=0) fireworks.splice(i,1);
      }
      requestAnimationFrame(tick);
    }
    tick();

    // ===== RANDOM L√å X√å (94.5% < 30k, 3% > 30k, 2% = 50k, 0.5% = 100k) =====
    const btn = document.getElementById('btn');
    const env = document.getElementById('env');
    const result = document.getElementById('result');

    function randomMoney(){
      const r = Math.random() * 100; // 0..100
      if (r < 0.5) {
        return 100000;               // 1%
      } else if (r < 2.5) {
        return 50000;                // 2%
      } else if (r < 5.5) {
        const mid = [40000, 60000, 80000]; // 2%
        return mid[Math.floor(Math.random() * mid.length)];
      } else {
        const low = [10000, 20000, 30000];  // 95%
        return low[Math.floor(Math.random() * low.length)];
      }
    }

    let opened = false;
    btn.onclick = () => {
      if (opened) return;
      opened = true;
      btn.disabled = true;
      env.classList.add('open');

      const money = randomMoney();
      setTimeout(() => {
        result.textContent = `üéâ B·∫°n nh·∫≠n ƒë∆∞·ª£c: ${money.toLocaleString('vi-VN')}ƒë`;
      }, 600);
    };
  </script>
</body>
</html>
